## Do NOT edit this file unless you really know what you are doing
cmake_minimum_required(VERSION 3.16)
cmake_policy(SET CMP0076 NEW)
set(CMAKE_COLOR_DIAGNOSTICS ON)
set(CMAKE_COLOR_MAKEFILE ON)

## Set project name
project(utility-programs VERSION 1.0 DESCRIPTION "Utilities for manipulating ASCII geophysical data files" LANGUAGES CXX)
message(STATUS "Configuring utility-programs")

include(cmake/Message-Functions.cmake)

reportvar(CMAKE_VERSION)
reportvar(CMAKE_SYSTEM_NAME)
reportvar(CMAKE_BUILD_TYPE)

set(CMAKE_EXECUTABLE_SUFFIX_CXX ".exe")

# Include the project level options and flags
include(cmake/Typical-Compiler-Options.cmake)

#######################################
### Add the build targets

# Add the project include directories, which don't have their own CMakelists.txt
include_directories(src)

# Add the cpp-utils submodule
add_subdirectory(submodules/cpp-utils EXCLUDE_FROM_ALL)

# Add the executable targets
set(target splitasciibycolumn)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

set(target subsampleascii)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

set(target subsetascii)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

set(target subsetasciibypolygon)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

set(target removedata)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

set(target mvglobal)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

set(target changetext)
add_executable(${target} src/${target}.cpp)
target_link_libraries(${target} PRIVATE cpp-utils)
install(TARGETS ${target} DESTINATION bin OPTIONAL)

if (MSVC)
	# Only on Windows with MSVC
	set(target memory)
	add_executable(${target} src/${target}.cpp)
	target_link_libraries(${target} PRIVATE cpp-utils)
	install(TARGETS ${target} DESTINATION bin OPTIONAL)
endif()
